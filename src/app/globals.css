/* Tailwind v3 Theme Configuration - Limed Spruce */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent flash of unstyled content during theme loading */
@layer base {
  html:not(.light):not(.dark) {
    background-color: #ffffff;
  }

  @media (prefers-color-scheme: dark) {
    html:not(.light):not(.dark) {
      background-color: #111827;
    }
  }
}

/* Custom Properties - Light Mode */
:root {
  /* Limed Spruce Color Palette */
  --limed-spruce-50: #f3f7f8;
  --limed-spruce-100: #e0eaed;
  --limed-spruce-200: #c5d6dc;
  --limed-spruce-300: #9cb9c4;
  --limed-spruce-400: #6c93a4;
  --limed-spruce-500: #517889;
  --limed-spruce-600: #466474;
  --limed-spruce-700: #3d5361;
  --limed-spruce-800: #36454f;
  --limed-spruce-900: #323e47;
  --limed-spruce-950: #1e272e;

  /* Theme Colors - Light Mode */
  --background: var(--limed-spruce-50);
  --foreground: var(--limed-spruce-900);
  --card: #ffffff;
  --card-foreground: var(--limed-spruce-900);
  --popover: #ffffff;
  --popover-foreground: var(--limed-spruce-900);
  --primary: var(--limed-spruce-500);
  --primary-foreground: #ffffff;
  --secondary: var(--limed-spruce-100);
  --secondary-foreground: var(--limed-spruce-700);
  --muted: var(--limed-spruce-100);
  --muted-foreground: var(--limed-spruce-600);
  --accent: var(--limed-spruce-200);
  --accent-foreground: var(--limed-spruce-800);
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --border: var(--limed-spruce-200);
  --input: var(--limed-spruce-200);
  --ring: var(--limed-spruce-400);

  /* Chart Colors */
  --chart-1: var(--limed-spruce-500);
  --chart-2: var(--limed-spruce-400);
  --chart-3: var(--limed-spruce-300);
  --chart-4: var(--limed-spruce-600);
  --chart-5: var(--limed-spruce-700);

  /* Sidebar Colors */
  --sidebar: var(--limed-spruce-50);
  --sidebar-foreground: var(--limed-spruce-800);
  --sidebar-primary: var(--limed-spruce-600);
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: var(--limed-spruce-100);
  --sidebar-accent-foreground: var(--limed-spruce-700);
  --sidebar-border: var(--limed-spruce-200);
  --sidebar-ring: var(--limed-spruce-300);

  /* Typography */
  --font-sans:
    var(--font-geist-sans), ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
    Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol', 'Noto Color Emoji';
  --font-serif: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;
  --font-mono:
    var(--font-geist-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;

  /* Border Radius */
  --radius: 0.75rem;

  /* Shadows */
  --shadow-2xs: 0 1px 2px 0 rgba(54, 69, 79, 0.05);
  --shadow-xs: 0 1px 3px 0 rgba(54, 69, 79, 0.08);
  --shadow-sm: 0 1px 3px 0 rgba(54, 69, 79, 0.1), 0 1px 2px -1px rgba(54, 69, 79, 0.1);
  --shadow: 0 1px 3px 0 rgba(54, 69, 79, 0.12), 0 1px 2px -1px rgba(54, 69, 79, 0.12);
  --shadow-md: 0 4px 6px -1px rgba(54, 69, 79, 0.1), 0 2px 4px -2px rgba(54, 69, 79, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(54, 69, 79, 0.1), 0 4px 6px -4px rgba(54, 69, 79, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(54, 69, 79, 0.1), 0 8px 10px -6px rgba(54, 69, 79, 0.1);
  --shadow-2xl: 0 25px 50px -12px rgba(54, 69, 79, 0.25);

  /* Spacing */
  --spacing: 0.25rem;
}

/* Dark Mode */
.dark {
  --background: var(--limed-spruce-950);
  --foreground: var(--limed-spruce-50);
  --card: var(--limed-spruce-900);
  --card-foreground: var(--limed-spruce-50);
  --popover: var(--limed-spruce-900);
  --popover-foreground: var(--limed-spruce-50);
  --primary: var(--limed-spruce-400);
  --primary-foreground: var(--limed-spruce-950);
  --secondary: var(--limed-spruce-800);
  --secondary-foreground: var(--limed-spruce-200);
  --muted: var(--limed-spruce-800);
  --muted-foreground: var(--limed-spruce-300);
  --accent: var(--limed-spruce-700);
  --accent-foreground: var(--limed-spruce-100);
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --border: var(--limed-spruce-700);
  --input: var(--limed-spruce-700);
  --ring: var(--limed-spruce-400);

  /* Chart Colors - Dark */
  --chart-1: var(--limed-spruce-400);
  --chart-2: var(--limed-spruce-300);
  --chart-3: var(--limed-spruce-500);
  --chart-4: var(--limed-spruce-200);
  --chart-5: var(--limed-spruce-600);

  /* Sidebar Colors - Dark */
  --sidebar: var(--limed-spruce-900);
  --sidebar-foreground: var(--limed-spruce-100);
  --sidebar-primary: var(--limed-spruce-400);
  --sidebar-primary-foreground: var(--limed-spruce-950);
  --sidebar-accent: var(--limed-spruce-800);
  --sidebar-accent-foreground: var(--limed-spruce-200);
  --sidebar-border: var(--limed-spruce-700);
  --sidebar-ring: var(--limed-spruce-500);

  /* Dark Mode Shadows */
  --shadow-2xs: 0 1px 2px 0 rgba(30, 39, 46, 0.25);
  --shadow-xs: 0 1px 3px 0 rgba(30, 39, 46, 0.3);
  --shadow-sm: 0 1px 3px 0 rgba(30, 39, 46, 0.35), 0 1px 2px -1px rgba(30, 39, 46, 0.35);
  --shadow: 0 1px 3px 0 rgba(30, 39, 46, 0.4), 0 1px 2px -1px rgba(30, 39, 46, 0.4);
  --shadow-md: 0 4px 6px -1px rgba(30, 39, 46, 0.35), 0 2px 4px -2px rgba(30, 39, 46, 0.35);
  --shadow-lg: 0 10px 15px -3px rgba(30, 39, 46, 0.35), 0 4px 6px -4px rgba(30, 39, 46, 0.35);
  --shadow-xl: 0 20px 25px -5px rgba(30, 39, 46, 0.35), 0 8px 10px -6px rgba(30, 39, 46, 0.35);
  --shadow-2xl: 0 25px 50px -12px rgba(30, 39, 46, 0.5);
}

/* Global Styles */
* {
  transition:
    background-color 0.2s ease,
    color 0.2s ease,
    border-color 0.2s ease,
    box-shadow 0.2s ease;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  font-feature-settings:
    'rlig' 1,
    'calt' 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom Utility Classes */
.bg-background {
  background-color: var(--background);
}
.bg-foreground {
  background-color: var(--foreground);
}
.bg-card {
  background-color: var(--card);
}
.bg-popover {
  background-color: var(--popover);
}
.bg-primary {
  background-color: var(--primary);
}
.bg-secondary {
  background-color: var(--secondary);
}
.bg-muted {
  background-color: var(--muted);
}
.bg-accent {
  background-color: var(--accent);
}
.bg-destructive {
  background-color: var(--destructive);
}
.bg-sidebar {
  background-color: var(--sidebar);
}

.text-foreground {
  color: var(--foreground);
}
.text-card-foreground {
  color: var(--card-foreground);
}
.text-popover-foreground {
  color: var(--popover-foreground);
}
.text-primary {
  color: var(--primary);
}
.text-primary-foreground {
  color: var(--primary-foreground);
}
.text-secondary-foreground {
  color: var(--secondary-foreground);
}
.text-muted-foreground {
  color: var(--muted-foreground);
}
.text-accent-foreground {
  color: var(--accent-foreground);
}
.text-destructive {
  color: var(--destructive);
}
.text-destructive-foreground {
  color: var(--destructive-foreground);
}
.text-sidebar-foreground {
  color: var(--sidebar-foreground);
}

.border-border {
  border-color: var(--border);
}
.border-input {
  border-color: var(--input);
}
.border-sidebar-border {
  border-color: var(--sidebar-border);
}

.ring-ring {
  --tw-ring-color: var(--ring);
}
.ring-sidebar-ring {
  --tw-ring-color: var(--sidebar-ring);
}

/* Focus Styles */
.focus-visible:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Selection Styles */
::selection {
  background-color: var(--primary);
  color: var(--primary-foreground);
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--muted);
}

::-webkit-scrollbar-thumb {
  background: var(--muted-foreground);
  border-radius: var(--radius);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-foreground);
}

/* Prism.js Plugins Only - No Theme */
@import url('https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css');
@import url('https://unpkg.com/prismjs@1.29.0/plugins/toolbar/prism-toolbar.css');

/* Custom Prism.js styles - moved to theme section below */

/* Code toolbar */
div.code-toolbar > .toolbar {
  @apply opacity-100;
}

div.code-toolbar > .toolbar > .toolbar-item > button {
  background-color: var(--limed-spruce-700);
  color: var(--limed-spruce-300);
  @apply rounded px-2 py-1 text-sm;
}

div.code-toolbar > .toolbar > .toolbar-item > button:hover {
  background-color: var(--limed-spruce-600);
}

/* Code Block Component Styles */
.code-filename {
  background-color: var(--limed-spruce-800);
  padding: 0.5rem;
  color: var(--limed-spruce-600);
  border-bottom: 1px solid var(--limed-spruce-700);
}

.dark .code-filename {
  background-color: var(--limed-spruce-700);
  color: var(--limed-spruce-300);
  border-bottom-color: var(--limed-spruce-800);
}

.code-container {
  background-color: var(--limed-spruce-950);
}

/* Code block scrollbar for dark mode */
pre[class*='language-']::-webkit-scrollbar {
  height: 10px;
}

pre[class*='language-']::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 5px;
}

pre[class*='language-']::-webkit-scrollbar-thumb {
  background: var(--limed-spruce-700);
  border-radius: 5px;
}

pre[class*='language-']::-webkit-scrollbar-thumb:hover {
  background: var(--limed-spruce-600);
}

/* Custom Prism Theme - Limed Spruce */
code[class*='language-'],
pre[class*='language-'] {
  background: none !important;
  font-family: var(--font-mono);
  font-size: 0.875rem;
  direction: ltr;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.6;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;
  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
  overflow: auto;
  border-radius: 0.5rem;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
  @apply rounded px-1 py-0.5;
  background-color: var(--limed-spruce-900);
  color: var(--limed-spruce-200);
  white-space: normal;
}

/* Token colors matching the theme - High specificity */
.prose pre[class*='language-'] .token.comment,
pre[class*='language-'] .token.comment,
.prose pre[class*='language-'] .token.prolog,
pre[class*='language-'] .token.prolog,
.prose pre[class*='language-'] .token.doctype,
pre[class*='language-'] .token.doctype,
.prose pre[class*='language-'] .token.cdata,
pre[class*='language-'] .token.cdata {
  color: #6b7280 !important;
  font-style: italic;
}

.dark .prose pre[class*='language-'] .token.comment,
.dark pre[class*='language-'] .token.comment,
.dark .prose pre[class*='language-'] .token.prolog,
.dark pre[class*='language-'] .token.prolog,
.dark .prose pre[class*='language-'] .token.doctype,
.dark pre[class*='language-'] .token.doctype,
.dark .prose pre[class*='language-'] .token.cdata,
.dark pre[class*='language-'] .token.cdata {
  color: #9ca3af !important;
}

.prose pre[class*='language-'] .token.punctuation,
pre[class*='language-'] .token.punctuation {
  color: #374151 !important;
}

.dark .prose pre[class*='language-'] .token.punctuation,
.dark pre[class*='language-'] .token.punctuation {
  color: #d1d5db !important;
}

.prose pre[class*='language-'] .token.namespace,
pre[class*='language-'] .token.namespace {
  opacity: 0.7;
}

/* Keywords, tags, booleans */
.prose pre[class*='language-'] .token.property,
.prose pre[class*='language-'] .token.tag,
.prose pre[class*='language-'] .token.boolean,
.prose pre[class*='language-'] .token.number,
.prose pre[class*='language-'] .token.constant,
.prose pre[class*='language-'] .token.symbol,
.prose pre[class*='language-'] .token.deleted,
pre[class*='language-'] .token.property,
pre[class*='language-'] .token.tag,
pre[class*='language-'] .token.boolean,
pre[class*='language-'] .token.number,
pre[class*='language-'] .token.constant,
pre[class*='language-'] .token.symbol,
pre[class*='language-'] .token.deleted {
  color: #059669 !important; /* emerald-600 */
}

/* Strings */
.prose pre[class*='language-'] .token.selector,
.prose pre[class*='language-'] .token.attr-name,
.prose pre[class*='language-'] .token.string,
.prose pre[class*='language-'] .token.char,
.prose pre[class*='language-'] .token.builtin,
.prose pre[class*='language-'] .token.inserted,
pre[class*='language-'] .token.selector,
pre[class*='language-'] .token.attr-name,
pre[class*='language-'] .token.string,
pre[class*='language-'] .token.char,
pre[class*='language-'] .token.builtin,
pre[class*='language-'] .token.inserted {
  color: #16a34a !important; /* green-600 */
}

/* Operators */
.prose pre[class*='language-'] .token.operator,
.prose pre[class*='language-'] .token.entity,
.prose pre[class*='language-'] .token.url,
.prose pre[class*='language-'] .language-css .token.string,
.prose pre[class*='language-'] .style .token.string,
pre[class*='language-'] .token.operator,
pre[class*='language-'] .token.entity,
pre[class*='language-'] .token.url,
pre[class*='language-'] .language-css .token.string,
pre[class*='language-'] .style .token.string {
  color: #d97706 !important; /* amber-600 */
}

/* Keywords */
.prose pre[class*='language-'] .token.atrule,
.prose pre[class*='language-'] .token.attr-value,
.prose pre[class*='language-'] .token.keyword,
pre[class*='language-'] .token.atrule,
pre[class*='language-'] .token.attr-value,
pre[class*='language-'] .token.keyword {
  color: #9333ea !important; /* purple-600 */
  font-weight: 500;
}

/* Functions */
.prose pre[class*='language-'] .token.function,
.prose pre[class*='language-'] .token.class-name,
pre[class*='language-'] .token.function,
pre[class*='language-'] .token.class-name {
  color: #2563eb !important; /* blue-600 */
  font-weight: 500;
}

/* Variables */
.prose pre[class*='language-'] .token.regex,
.prose pre[class*='language-'] .token.important,
.prose pre[class*='language-'] .token.variable,
pre[class*='language-'] .token.regex,
pre[class*='language-'] .token.important,
pre[class*='language-'] .token.variable {
  color: #dc2626 !important; /* red-600 */
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}

/* Line numbers */
pre[class*='language-'].line-numbers {
  position: relative;
  padding-left: 3.8em !important;
  counter-reset: linenumber;
}

pre[class*='language-'].line-numbers > code {
  position: relative;
  white-space: inherit;
}

.line-numbers .line-numbers-rows {
  position: absolute;
  pointer-events: none;
  top: 1.5rem; /* Match pre padding */
  font-size: 100%;
  left: 0;
  width: 3em;
  letter-spacing: -1px;
  border-right: 1px solid var(--limed-spruce-800);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.line-numbers-rows > span {
  display: block;
  counter-increment: linenumber;
  padding-right: 1em;
  line-height: 1.6; /* Match code line-height */
}

.line-numbers-rows > span:before {
  content: counter(linenumber);
  color: var(--limed-spruce-500) !important;
  display: inline-block;
  width: 100%;
  text-align: right;
  padding-right: 0.8em;
}

/* Custom Prose/Rich Text Styles */
@layer components {
  .prose {
    /* Reset prose pre styles but allow custom component overrides */
    & pre:not([class*='language-']) {
      @apply m-0 bg-transparent p-0;
    }
    & pre:not([class*='language-']) code {
      @apply bg-transparent;
    }
    /* Custom heading styles - using green color like footer button */
    & h1 {
      @apply text-7xl font-bold;
    }
    & h2 {
      @apply my-4 text-4xl font-bold;
    }
    & h3 {
      @apply text-3xl font-bold;
    }
    & h4 {
      @apply text-3xl font-bold;
    }
    & h5 {
      @apply text-2xl font-bold;
    }
    & h6 {
      @apply text-xl font-bold;
    }

    /* Custom link styles - using green color like footer button */
    & a {
      @apply text-lochinvar-600 underline-offset-4 transition-colors hover:text-lochinvar-700 dark:text-lochinvar-500 dark:hover:text-lochinvar-400;
    }

    /* Custom list styles - bullet points in green */
    & ul {
      @apply list-disc pl-6 marker:text-lochinvar-600 dark:marker:text-lochinvar-500;
    }
    & ol {
      @apply list-decimal pl-6 marker:text-lochinvar-600 dark:marker:text-lochinvar-500;
    }

    /* Nested list spacing */
    & li {
      @apply my-2;
    }
    & ul ul,
    & ol ol,
    & ul ol,
    & ol ul {
      @apply ml-4 mt-2;
    }
  }
}

/* Code block overrides - Highest specificity */
.prose pre[class*='language-'] {
  padding: 2rem !important;
  padding-top: 3rem !important;
  margin: 0 !important;
  background-color: #e5e7eb !important; /* gray-200 */
}

.dark .prose pre[class*='language-'] {
  background-color: #111827 !important; /* gray-900 */
}

/* Ensure token colors work */
.prose pre[class*='language-'] code {
  color: #1f2937 !important; /* gray-800 */
}

.dark .prose pre[class*='language-'] code {
  color: #f3f4f6 !important; /* gray-100 */
}

/* Force token colors to show - Ultra high specificity */
div.prose pre code .token.keyword {
  color: #9333ea !important;
}

div.prose pre code .token.string {
  color: #16a34a !important;
}

div.prose pre code .token.function {
  color: #2563eb !important;
}

div.prose pre code .token.number {
  color: #059669 !important;
}

div.prose pre code .token.operator {
  color: #d97706 !important;
}

div.prose pre code .token.comment {
  color: #6b7280 !important;
  font-style: italic;
}

/* Dark mode token colors */
.dark div.prose pre code .token.keyword {
  color: #c084fc !important;
}

.dark div.prose pre code .token.string {
  color: #86efac !important;
}

.dark div.prose pre code .token.function {
  color: #60a5fa !important;
}

.dark div.prose pre code .token.number {
  color: #34d399 !important;
}

.dark div.prose pre code .token.operator {
  color: #fbbf24 !important;
}

.dark div.prose pre code .token.comment {
  color: #9ca3af !important;
}
